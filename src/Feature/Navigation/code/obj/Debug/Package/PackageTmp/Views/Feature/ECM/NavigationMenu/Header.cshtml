@using EMAAR.ECM.Foundation.ORM.Models.sitecore.templates.Project.ECM.Common.Content_Types
@model EMAAR.ECM.Feature.Navigation.Interface.IHeaderViewModel
@using Glass.Mapper.Sc.Web.Mvc
@using EMAAR.ECM.Foundation.Constants


<!-- Header starts here -->
<header class="@Model.HeaderCss">
    <div class="container">
        <div class="flexBox">
            @if (Model.Header!=null && Model.Header.SiteRoot != null && Model.Header.SiteRoot.Site_Logo != null)
            {
                using (Html.Glass().BeginRenderLink(Model.Header.SiteRoot, x => x.Site_Logo_Url, new { @class = "siteLogo" }, isEditable: true))
                {
                    @Html.Glass().RenderImage(Model.Header.SiteRoot, x => x.Site_Logo, new { alt = "image description" }, isEditable: true)
                }
            }
            <nav class="siteNavigation">
                <ul>
                    @{
                        if (Model != null && Model.Header.Root_Navigations != null)
                        {
                            var navigation = new List<INavigation>(Model.Header.Root_Navigations).Count;
                            if (navigation > 0)
                            {
                                foreach (var rootNav in Model.Header.Root_Navigations)
                                {
                                    int count = 0;
                                    var subNavigation = new List<ISub_Navigation>(rootNav.Sub_Navigations).Count;
                                    //No Subnavigation
                                    if (subNavigation <= 0)
                                    {
                                        if (count == 0)
                                        {
                                            <li class="nosub">
                                                @using (Html.Glass().BeginRenderLink(rootNav, x => x.Navigation_Link,new {@class="active" }, isEditable: true))
                                                {
                                                   @Html.Glass().Editable(rootNav, x => x.Navigation_Title)
                                                }
                                            </li>
                                        }
                                        else
                                        {
                                            <li class="nosub">
                                                @using (Html.Glass().BeginRenderLink(rootNav, x => x.Navigation_Link, isEditable: true))
                                                {
                                                    @Html.Glass().Editable(rootNav, x => x.Navigation_Title)
                                                }
                                            </li>
                                        }
                                        count++;
                                        continue;
                                    }
                                    <li>
                                        <!--Link with Sub navigation-->
                                        @if (count == 0)
                                        {
                                            <a href="javascript:;" class="active"> @Html.Glass().Editable(rootNav, x => x.Navigation_Title)</a>
                                        }
                                        else
                                        {
                                            <a href="javascript:;"> @Html.Glass().Editable(rootNav, x => x.Navigation_Title)</a>

                                        }
                                        <div class="sub-menu">
                                            <ul>
                                                @if (subNavigation > 0)
                                                {
                                                    foreach (var subNav in rootNav.Sub_Navigations)
                                                    {
                                                        <li>
                                                            @using (Html.Glass().BeginRenderLink(subNav, x => x.Navigation_Link, isEditable: true))
                                                            {
                                                                @Html.Glass().Editable(subNav, x => x.Navigation_Title)
                                                            }
                                                        </li>
                                                    }
                                                }
                                            </ul>
                                        </div>

                                    </li>
                                    count++;
                                }
                            }
                        }
                    }
                </ul>
                <aside class="siteSearch js-sOnTrigger">
                    <form action="http://google.com">
                        <div class="swrap">
                            <button class="sbtn" type="submit">
                                <img src="@Model.SearchIcon" alt="">
                            </button>
                            <div class="searchFielfds">
                                <input type="search" placeholder="@Html.Glass().Editable(Model.Header,  x => x.Search_Watermark)" class="searchinput" />
                                <a href="javascript:;" class="clsoebtn">

                                    <img src="@Model.CloseIcon" alt="">

                                </a>
                            </div>
                        </div>
                    </form>
                </aside>
                <!-- siteSearch ends here -->
            </nav>
            <!-- siteNavigation ends here -->
            <div class="mobileWrapper">
                <a href="javascript:;" class="loginmobile">
                    <img src="~/images/icon/login.svg" alt="login">
                </a>
                <a class="hamburgers hamburger--squeeze js-hamburger mobile-menu-trigger" href="javascript:;">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <a href="javascript:;" class="siteLogin">
        <i class="ico">
            <img src="../images/icon/login.svg" alt="login" class="svg">
        </i>
        <span>@Html.Glass().Editable(Model.Header, x => x.Login_Text)</span>
    </a>
    <!-- siteLogin ends here -->
</header>
<!-- Header ends here -->